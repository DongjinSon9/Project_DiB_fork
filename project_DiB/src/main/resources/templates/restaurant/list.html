<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Restaurant List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
            crossorigin="anonymous"></script>
    <style>
        .restaurant-link {
            text-decoration: none;
            color: black;
        }
    </style>
</head>

<body>
<header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-2 border-bottom">
    <div class="col-md-3 mb-2 mb-md-0">
    </div>
    <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a href="#" class="nav-link px-2 link-secondary">Home</a></li>
        <li><a href="#" class="nav-link px-2">Features</a></li>
        <li><a href="#" class="nav-link px-2">Pricing</a></li>
        <li><a href="#" class="nav-link px-2">FAQs</a></li>
        <li><a href="#" class="nav-link px-2">About</a></li>
    </ul>
    <div class="col-md-3 text-end">
        <button type="button" class="btn btn-outline-primary me-2">Login</button>
        <button type="button" class="btn btn-primary">Sign-up</button>
    </div>
</header>

<nav class="navbar navbar-expand-lg border-bottom" aria-label="Offcanvas navbar large"
     style="margin-top: 20px; margin-bottom: 20px; margin-left: 300px; margin-right: 300px; padding-bottom: 15px;">
    <div class="container-fluid">
        <a class="navbar-brand" style="margin-left: 30px;" href="/restaurant/list">List</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar2"
                aria-controls="offcanvasNavbar2" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <button type="button" class="btn btn-primary ms-2" onclick="window.location.href='/restaurant/register'"
        sec:authorize="hasRole('ROLE_ADMIN')">
            Create
        </button>
        <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasNavbar2"
             aria-labelledby="offcanvasNavbar2Label">
            <div class="offcanvas-body" style="margin-right: 30px;">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dropdownMenuButton" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false">
                            검색 메뉴
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <li><a class="dropdown-item filter-option" href="#" data-filter="rest_name">Name</a></li>
                            <li><a class="dropdown-item filter-option" href="#" data-filter="rest_loc">Location</a></li>
                            <li><a class="dropdown-item filter-option" href="#" data-filter="rest_menu">menu</a></li>
                        </ul>
                    </li>
                </ul>
                <form class="d-flex mt-3 mt-lg-0" role="search" action="/restaurant/list" method="get">
                    <input type="hidden" name="filter" id="filter" th:value="${filter}">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
                           name="keyword" id="keyword">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
</nav>

<!-- card -->
<div class="container my-5">
    <div th:each="restaurant : ${result.dtoList}" class="card mb-3 p-3 rounded mx-auto" style="max-width: 840px;">
        <div class="row g-0">
            <div class="col-md-4">
                <div th:if="${restaurant.fileNames != null}">
                    <div th:each="file, iterStat : ${restaurant.fileNames}">
                        <a th:if="${iterStat.index == 0}" th:href="@{/restaurant/read(rno=${restaurant.rno})}">
                            <img th:src="@{|/view/${file}|}" class="img-fluid rounded-start" alt="...">
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title">
                        <a th:href="@{/restaurant/read(rno=${restaurant.rno})}" th:text="${restaurant.rest_name}"
                           class="restaurant-link">Card title</a>
                    </h5>
                    <p class="card-text" th:text="${restaurant.rest_exp}">This is a wider card with supporting text
                        below as a natural lead-in to additional content. This content is a little bit longer.</p>
                    <p class="card-text" th:text="${restaurant.rest_loc}"></p>
                </div>
            </div>
        </div>
    </div>
</div> <!-- card end-->

<!-- pagination -->
<div class="container-fluid">
    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between pb-3 border-bottom">
        <nav aria-label="..." class="mx-auto">
            <ul class="pagination">
                <li class="page-item" th:classappend="${result.prev} ? '' : 'disabled'">
                    <a class="page-link" th:href="@{|/restaurant/list?page=${result.page - 1}|}">Previous</a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(result.start, result.end)}"
                    th:classappend="${i == result.page} ? 'active'">
                    <a class="page-link" th:href="@{|/restaurant/list?page=${i}|}" th:text="${i}">1</a>
                </li>
                <li class="page-item" th:classappend="${result.next} ? '' : 'disabled'">
                    <a class="page-link" th:href="@{|/restaurant/list?page=${result.page + 1}|}">Next</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
<!-- pagination end -->

<footer class="py-5 text-center text-body-secondary bg-body-tertiary">
    <p>Blog template built for <a href="https://getbootstrap.com/">Bootstrap</a> by <a
            href="https://twitter.com/mdo">@mdo</a>.</p>
    <p class="mb-0">
        <a href="#">Back to top</a>
    </p>
</footer>

<script>
    $(document).ready(function () {
        $('.filter-option').on('click', function () {
            var filterValue = $(this).data('filter');
            $('#filter').val(filterValue);
            $('#dropdownMenuButton').text($(this).text());
        });
    });
</script>
</body>

</html>
